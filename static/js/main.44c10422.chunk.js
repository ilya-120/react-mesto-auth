(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a.p+"static/media/Union.e38b395c.svg"},11:function(e,t,a){e.exports=a.p+"static/media/Union_error.4072126c.svg"},14:function(e,t,a){e.exports=a(79)},23:function(e,t,a){},7:function(e,t,a){e.exports=a.p+"static/media/logo.7baba3c1.svg"},79:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),o=a(6),r=a.n(o),i=a(4),l=(a(23),a(12)),s=a(2),u=a(0),m=a(7),p=a.n(m);var d=function(e){var t=e.email,a=e.title,n=e.to,o=e.onClick;return c.a.createElement("header",{className:"header"},c.a.createElement("img",{className:"header__logo",src:p.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"}),c.a.createElement("nav",{className:"header__nav"},c.a.createElement("p",{className:"header__email"},t),c.a.createElement(i.b,{to:n,className:"header__link",onClick:o},a)))};var _=function(){return c.a.createElement("footer",{className:"footer"},c.a.createElement("p",{className:"footer__subtitle"},"\xa9 ",(new Date).getFullYear()," Mesto Russia"))},f=c.a.createContext();var h=function(e){var t=e.card,a=e.link,o=e.name,r=e.likes,i=e.onCardClick,l=e.onCardLike,s=e.onCardDeleteClick,u=Object(n.useContext)(f),m=t.owner._id===u._id,p=t.likes.some(function(e){return e._id===u._id}),d="elements__card-like ".concat(p&&"elements__card-like_activ");return c.a.createElement("article",{className:"elements__card"},m&&c.a.createElement("button",{className:"elements__card-delete",type:"button",onClick:function(){s(t)}}),c.a.createElement("img",{className:"elements__card-image",src:a,alt:"\u0424\u043e\u0442\u043e ".concat(o),onClick:function(){i(t)}}),c.a.createElement("div",{className:"elements__card-name"},c.a.createElement("h2",{className:"elements__card-title"},o),c.a.createElement("div",{className:"element__like-container"},c.a.createElement("button",{type:"button",className:d,onClick:function(){l(t)}}),c.a.createElement("span",{className:"element__likes-volume"},r))))};var b=function(e){var t=e.onEditAvatar,a=e.onEditProfile,o=e.onAddPlace,r=e.onCardClick,i=e.onCardLike,l=e.onCardDeleteClick,s=e.cards,u=Object(n.useContext)(f);return c.a.createElement("main",{className:"content"},c.a.createElement("section",{className:"profile"},c.a.createElement("img",{className:"profile__avatar",src:u.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440"}),c.a.createElement("button",{className:"profile__avatar-button",onClick:t}),c.a.createElement("div",{className:"profile__info"},c.a.createElement("div",{className:"profile__author"},c.a.createElement("h1",{className:"profile__title"},u.name),c.a.createElement("button",{"aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",className:"profile__edit-button",type:"button",onClick:a})),c.a.createElement("p",{className:"profile__subtitle"},u.about)),c.a.createElement("button",{className:"profile__add-button",type:"button",onClick:o})),c.a.createElement("section",{className:"elements"},s.map(function(e){return c.a.createElement(h,{key:e._id,link:e.link,name:e.name,likes:e.likes.length,card:e,onCardClick:r,onCardLike:i,onCardDeleteClick:l})})))};var E=function(e){var t=e.name,a=e.isOpen,n=e.onClose,o=e.title,r=e.buttonTitle,i=e.onSubmit,l=e.children;return c.a.createElement("div",{className:"popup ".concat(a&&"popup_opened"),id:"popup-".concat(t)},c.a.createElement("div",{className:"popup__container"},c.a.createElement("button",{className:"popup__container-close-button",type:"button",onClick:n}),c.a.createElement("h2",{className:"popup__container-title"},o),c.a.createElement("form",{name:t,className:"popup__container-form popup__".concat(t),onSubmit:i},l,c.a.createElement("button",{type:"submit",className:"popup__container-submit-button",value:"\u0414\u0430"},r))))};var g=function(e){var t=e.isOpen,a=e.onClose,o=e.onUpdateUser,r=Object(n.useContext)(f),i=Object(n.useState)(""),l=Object(s.a)(i,2),u=l[0],m=l[1],p=Object(n.useState)(""),d=Object(s.a)(p,2),_=d[0],h=d[1];return Object(n.useEffect)(function(){t&&(m(r.name),h(r.about))},[r,t]),c.a.createElement(E,{name:"edit-card",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",buttonTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),o({name:u,description:_})}},c.a.createElement("input",{classNameName:"popup__input popup__input_type_title",id:"input-names",type:"text",name:"name",required:!0,minlength:"2",maxlength:"40",placeholder:"\u0418\u043c\u044f",value:u||"",onChange:function(e){m(e.target.value)}}),c.a.createElement("span",{className:"popup__error input-names-error"}),c.a.createElement("input",{className:"popup__input popup__input_type_subtitle",id:"input-about",type:"text",name:"about",required:!0,minlength:"2",maxlength:"200",placeholder:"\u041e \u0441\u0435\u0431\u0435",value:_||"",onChange:function(e){h(e.target.value)}}),c.a.createElement("span",{className:"popup__error input-about-error"}))};var v=function(e){var t=e.isOpen,a=e.onClose,o=e.onUpdateAvatar,r=Object(n.useRef)();return Object(n.useEffect)(function(){r.current.value=""},[t]),c.a.createElement(E,{name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",buttonTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),o({avatar:r.current.value})}},c.a.createElement("input",{className:"popup__input popup__input_type_link",id:"input-avatarLink",required:!0,type:"url",name:"avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",ref:r}),c.a.createElement("span",{className:"popup__error input-avatarLink-error"}))};var N=function(e){var t=e.isOpen,a=e.onClose,o=e.onAddPlace,r=Object(n.useState)(""),i=Object(s.a)(r,2),l=i[0],u=i[1],m=Object(n.useState)(""),p=Object(s.a)(m,2),d=p[0],_=p[1];return c.a.useEffect(function(){u(""),_("")},[t]),c.a.createElement(E,{name:"add-card",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",buttonTitle:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),o({name:l,link:d})}},c.a.createElement("input",{className:"popup__input popup__input_type_name",id:"input-name",required:!0,minlength:"2",maxlength:"40",type:"text",name:"name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",onChange:function(e){u(e.target.value)},value:l}),c.a.createElement("span",{className:"popup__error input-name-error"}),c.a.createElement("input",{className:"popup__input popup__input_type_link",id:"input-link",required:!0,type:"url",name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",onChange:function(e){_(e.target.value)},value:d}),c.a.createElement("span",{className:"popup__error input-link-error"}))};var k=function(e){var t=e.isOpen,a=e.onClose,n=e.card,o=e.onSubmit;return c.a.createElement(E,{name:"confirm",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonTitle:"\u0414\u0430",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),o(n)}})};var C=function(e){var t=e.card,a=e.onClose;return c.a.createElement("div",{className:"popup popup_image ".concat(t&&"popup_opened"),id:"popup-image"},c.a.createElement("div",{className:"popup__container-image"},c.a.createElement("button",{className:"popup__container-close-button",type:"button",onClick:a}),c.a.createElement("img",{className:"popup__card-image",src:t&&t.link,alt:t&&t.name}),c.a.createElement("p",{className:"popup__card-title"},t&&t.name)))},O=a(8),j=a(9),y=new(function(){function e(t){Object(O.a)(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}return Object(j.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject(e.status)}},{key:"getAppInfo",value:function(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"users/me"),{headers:this._headers}).then(this._checkResponse)}},{key:"setAvatar",value:function(e){return fetch("".concat(this._baseUrl,"users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then(this._checkResponse)}},{key:"setUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.description})}).then(this._checkResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"cards"),{headers:this._headers}).then(this._checkResponse)}},{key:"postNewCard",value:function(e){return fetch("".concat(this._baseUrl,"cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"updateCardLike",value:function(e,t){return fetch("".concat(this._baseUrl,"cards/likes/").concat(e),{method:t?"PUT":"DELETE",headers:this._headers}).then(this._checkResponse)}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-38/",headers:{authorization:"fa48ff2e-d2a9-4324-9dba-bc9235b793c8","Content-Type":"application/json"}});var S=function(e){var t=e.onLogin,a=Object(n.useState)(""),o=Object(s.a)(a,2),r=o[0],i=o[1],l=Object(n.useState)(""),u=Object(s.a)(l,2),m=u[0],p=u[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:"login"},c.a.createElement("h2",{className:"login__title"},"\u0412\u0445\u043e\u0434"),c.a.createElement("form",{className:"login__form",onSubmit:function(e){e.preventDefault(),r&&m&&t(r,m)}},c.a.createElement("input",{className:"login__input","aria-label":"\u0412\u0430\u0448\u0430 \u043f\u043e\u0447\u0442\u0430",type:"Email",name:"email",id:"email",placeholder:"Email",required:!0,minLength:"2",value:r,onChange:function(e){i(e.target.value)}}),c.a.createElement("span",{id:"email-error",className:"login__error"}),c.a.createElement("input",{className:"login__input","aria-label":"\u041f\u0430\u0440\u043e\u043b\u044c",type:"Password",name:"password",id:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,minLength:"6",maxLength:"200",value:m,onChange:function(e){p(e.target.value)}}),c.a.createElement("span",{id:"password-error",className:"login__error"}),c.a.createElement("button",{type:"submit",className:"login__button"},"\u0412\u043e\u0439\u0442\u0438"))))};var w=function(e){var t=e.onRegister,a=Object(n.useState)(""),o=Object(s.a)(a,2),r=o[0],l=o[1],u=Object(n.useState)(""),m=Object(s.a)(u,2),p=m[0],d=m[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:"login"},c.a.createElement("h2",{className:"login__title"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),c.a.createElement("form",{className:"login__form",onSubmit:function(e){e.preventDefault(),r&&p&&t(r,p)}},c.a.createElement("input",{className:"login__input","aria-label":"\u0412\u0430\u0448\u0430 \u043f\u043e\u0447\u0442\u0430",type:"Email",name:"email",id:"email",placeholder:"Email",required:!0,minLength:"2",maxLength:"50",onChange:function(e){l(e.target.value)}}),c.a.createElement("span",{id:"email-error",className:"login__error"}),c.a.createElement("input",{className:"login__input","aria-label":"\u041f\u0430\u0440\u043e\u043b\u044c",type:"Password",name:"password",id:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,minLength:"6",maxLength:"200",onChange:function(e){d(e.target.value)}}),c.a.createElement("span",{id:"password-error",className:"login__error"}),c.a.createElement("button",{type:"submit",className:"login__button"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),c.a.createElement("p",{className:"login__subtitle"},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",c.a.createElement(i.b,{to:"/sign-in",className:"login__link"},"\u0412\u043e\u0439\u0442\u0438"))))},L=a(10),U=a.n(L),T=a(11),P=a.n(T);var A=function(e){var t=e.isOpen,a=e.onClose,n=e.isSuccess;return c.a.createElement("div",{className:"popup ".concat(t&&"popup_opened")},c.a.createElement("div",{className:"popup__container"},c.a.createElement("button",{className:"popup__container-close-button",type:"button",onClick:a}),c.a.createElement("img",{src:n?U.a:P.a,alt:n?"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u0435 \u043f\u0440\u043e\u0448\u043b\u0430",className:"popup__signup-icon"}),c.a.createElement("h3",{className:"popup__signup-title"},n?"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.")))},x=a(13),I=function(e){var t=e.component,a=Object(x.a)(e,["component"]);return a.loggedIn?c.a.createElement(t,a):c.a.createElement(u.a,{to:"/sign-in"})},D="https://auth.nomoreparties.co",R=function(e,t){return fetch("".concat(D,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(function(e){return 201===e.status?e.json():e})},F=function(e,t){return fetch("".concat(D,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(function(e){return e.json()}).then(function(e){return localStorage.setItem("jwt",e.jwt),localStorage.setItem("email",e.email),e})},q=function(e){return fetch("".concat(D,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then(function(e){return 200===e.status?e.json():e})};var J=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(!1),i=Object(s.a)(r,2),m=i[0],p=i[1],h=Object(n.useState)(!1),E=Object(s.a)(h,2),O=E[0],j=E[1],L=Object(n.useState)(!1),U=Object(s.a)(L,2),T=U[0],P=U[1],x=Object(n.useState)(!1),D=Object(s.a)(x,2),J=D[0],B=D[1],z=Object(n.useState)(null),H=Object(s.a)(z,2),M=H[0],G=H[1],Y=Object(n.useState)({}),K=Object(s.a)(Y,2),Q=K[0],V=K[1],W=Object(n.useState)([]),X=Object(s.a)(W,2),Z=X[0],$=X[1],ee=Object(n.useState)(""),te=Object(s.a)(ee,2),ae=te[0],ne=te[1],ce=Object(n.useState)(!0),oe=Object(s.a)(ce,2),re=oe[0],ie=oe[1],le=Object(n.useState)(!1),se=Object(s.a)(le,2),ue=se[0],me=se[1],pe=Object(n.useState)(""),de=Object(s.a)(pe,2),_e=de[0],fe=de[1],he=Object(u.g)();function be(){B(!0)}function Ee(){p(!1),j(!1),o(!1),P(!1),B(!1),G(null)}return Object(n.useEffect)(function(){var e=localStorage.getItem("jwt");e&&q(e).then(function(e){e&&(me(!0),fe(e.data.email))}).catch(function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e)),me(!1)})},[]),Object(n.useEffect)(function(){function e(e){"Escape"===e.key&&Ee()}return y.getAppInfo().then(function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];V(a),$(n)}).catch(function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445: ".concat(e))}),document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}},[]),c.a.createElement(f.Provider,{value:Q},c.a.createElement("div",{className:"root"},c.a.createElement("div",{class:"page"},c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/",element:c.a.createElement(c.a.Fragment,null,c.a.createElement(d,{email:_e,title:"\u0412\u044b\u0439\u0442\u0438",to:"/sign-in",onClick:function(){me(!1),fe(""),he("/sign-in"),localStorage.removeItem("jwt")}}),c.a.createElement(I,{loggedIn:ue,component:b,onEditAvatar:function(){j(!0)},onEditProfile:function(){o(!0)},onAddPlace:function(){p(!0)},onCardClick:function(e){G(e)},onCardLike:function(e){var t=e.likes.some(function(e){return e._id===Q._id});y.updateCardLike(e._id,!t).then(function(t){$(function(a){return a.map(function(a){return a._id===e._id?t:a})})}).catch(function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445: ".concat(e))})},onCardDeleteClick:function(e){P(!T),ne(e)},cards:Z}))}),c.a.createElement(u.b,{path:ue?"":"/sign-in",element:c.a.createElement(c.a.Fragment,null,c.a.createElement(d,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",to:"/sign-up"}),c.a.createElement(S,{onLogin:function(e,t){F(e,t).then(function(t){t.token&&(localStorage.setItem("jwt",t.token),me(!0),fe(e),he("/"))}).catch(function(e){ie(!1),be(),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0445\u043e\u0434\u0430: ".concat(e))})}}))}),c.a.createElement(u.b,{path:ue?"":"/sign-up",element:c.a.createElement(c.a.Fragment,null,c.a.createElement(d,{title:"\u0412\u043e\u0439\u0442\u0438",to:"/sign-in"}),c.a.createElement(w,{onRegister:function(e,t){R(e,t).then(function(e){e.data._id?(ie(!0),he("/sign-in")):ie(!1)}).catch(function(e){ie(!1),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438: ".concat(e))}).finally(function(){return be()})}}))}),c.a.createElement(u.b,{path:"*",element:c.a.createElement(u.a,{to:"/"})})),c.a.createElement(_,null),c.a.createElement(g,{isOpen:a,onClose:Ee,onUpdateUser:function(e){y.setUserInfo(e).then(function(e){V(e),Ee()}).catch(function(e){console.log("\u043d\u0435\u0443\u0434\u0430\u0447\u043d\u043e: ".concat(e))})}}),c.a.createElement(N,{isOpen:m,onClose:Ee,onAddPlace:function(e){y.postNewCard(e).then(function(e){$([e].concat(Object(l.a)(Z))),Ee()}).catch(function(e){console.log("\u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))})}}),c.a.createElement(v,{isOpen:O,onClose:Ee,onUpdateAvatar:function(e){y.setAvatar(e).then(function(e){V(e),Ee()}).catch(function(e){console.log("\u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))})}}),c.a.createElement(k,{isOpen:T,onClose:Ee,onSubmit:function(e){y.deleteCard(e._id).then(function(){$(function(t){return t.filter(function(t){return t._id!==e._id})}),Ee()}).catch(function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445: ".concat(e))})},card:ae}),c.a.createElement(A,{onClose:Ee,isOpen:J,isSuccess:re}),c.a.createElement(C,{card:M,onClose:Ee}))))},B=function(e){e&&e instanceof Function&&a.e(1).then(a.bind(null,80)).then(function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),o(e),r(e)})};r.a.createRoot(document.getElementById("root")).render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(i.a,null,c.a.createElement(J,null)))),B()}},[[14,3,2]]]);
//# sourceMappingURL=main.44c10422.chunk.js.map